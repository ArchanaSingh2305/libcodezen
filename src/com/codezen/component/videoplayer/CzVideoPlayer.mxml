<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" 
		 width="710" height="490" 
		 contentBackgroundColor="#000000"
		 xmlns:videoplayer="com.codezen.component.videoplayer.*" 
		 xmlns:ui="com.codezen.component.videoplayer.ui.*">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
		<s:Parallel id="showEff">
			<s:Fade alphaFrom="0.0" alphaTo="1.0" duration="200" />
		</s:Parallel>
		
		<s:Parallel id="hideEff">
			<s:Fade alphaFrom="1.0" alphaTo="0.0" duration="200" />
		</s:Parallel>
		
		<fx:Boolean id="showLoop">true</fx:Boolean>
		<fx:Boolean id="showScale">true</fx:Boolean>
		
		<fx:String id="prev_ep_img"></fx:String>
		<fx:String id="prev_ep_txt">null</fx:String>
		<fx:String id="next_ep_img"></fx:String>
		<fx:String id="next_ep_txt">null</fx:String>
		
		<fx:Number id="updateTime">-1</fx:Number>
	</fx:Declarations>
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		@namespace mx "library://ns.adobe.com/flex/mx";
		@namespace videoplayer "com.codezen.component.videoplayer.*";
		@namespace ui "com.codezen.component.videoplayer.ui.*";
		
		@font-face{
			src: url("assets/GOTHIC.TTF");
			fontFamily: Gothic;
			advancedAntiAliasing: true;
		}
		
		.playerControl{
			font-family: Gothic;
			font-size: 12;
		}
	</fx:Style>
	
	<fx:Metadata>
		[Event(name="episodeWatched", type="flash.events.Event")]
		[Event(name="playPrev", type="flash.events.Event")]
		[Event(name="playNext", type="flash.events.Event")]
		[Event(name="returnView", type="flash.events.Event")]
		[Event(name="updateTime", type="flash.events.Event")]
	</fx:Metadata>
	
	<fx:Script source="CzVideoPlayer.as" />
	
	<s:Rect left="0" right="0" top="0" bottom="0">
		<s:fill>
			<s:SolidColor color="#000000"/>
		</s:fill>
	</s:Rect>
	
	<!-- loading label -->
	<s:Label horizontalCenter="0" verticalCenter="0" text="Загрузка..." verticalAlign="middle" textAlign="center" fontFamily="Gothic" fontSize="20" fontWeight="bold" color="#FFFFFF"/>
	
	<!-- video placeholder -->
	<mx:UIComponent id="video_player" left="0" right="0" top="0" bottom="0" creationComplete="{playerState()}"
					resize="{onVideoResize()}"/>
	
	<!-- Subtitles -->
	<mx:UIComponent id="subtitles_mc" left="0" right="0" top="0" bottom="0" mouseChildren="false" mouseEnabled="false" />
	
	<!-- top bar -->
	<s:BorderContainer id="player_data" left="-1" top="-1" right="-1" backgroundAlpha="0" borderAlpha="0" bottom="190"
					   mouseEnabled="false">
		<!-- title and stuff -->
		<s:BorderContainer left="0" top="0" right="0" height="40" backgroundColor="#151515" 
						   cornerRadius="2" borderColor="#494949" alpha="0.8" id="player_data_bg"
						   showEffect="{showEff}" hideEffect="{hideEff}">
			<s:HGroup left="5" top="4" height="30" verticalAlign="middle" horizontalAlign="left">
				<s:Image left="5" top="4" maxHeight="30" maxWidth="40" id="video_pic" scaleMode="letterbox"/>
				<s:Label textAlign="left" verticalAlign="top"
						 id="video_title" color="#FFFFFF" styleName="playerControl"/>
			</s:HGroup>		
			
			<!-- scale list -->
			<s:DropDownList id="ratio_list" verticalCenter="0" width="165" right="92" color="#E9E9E9" selectedIndex="0"
							change="{onVideoResize()}" open="ratio_list_openHandler(event)" close="ratio_list_closeHandler(event)" 
							chromeColor="#353535" dropShadowVisible="false" visible="{showScale}">
				<s:dataProvider>
					<s:ArrayCollection>
						<fx:Object label="Сохранять пропорции" data="orig" />
						<fx:Object label="Растянуть горизонтально" data="horizontal" />
						<fx:Object label="Растянуть вертикально" data="vertical" />
					</s:ArrayCollection>
				</s:dataProvider>
			</s:DropDownList>
			
			<!-- loop button -->
			<ui:ToggleImage onImage="{loopSel}" offImage="{loopOff}" 
							id="play_nonstop" right="65" verticalCenter="0" toolTip="Играть подряд" 
							width="22" height="22" visible="{showLoop}"/>
			<!-- lock button -->
			<ui:ToggleImage onImage="{onTopLock}" offImage="{onTopNormal}" 
							id="above_all" right="35" verticalCenter="0" click="{aboveAll()}" toolTip="Поверх всех"
							width="22" height="22"/>
			<!-- close button -->
			<mx:Image right="5" verticalCenter="0" useHandCursor="true" buttonMode="true" source="@Embed('assets/player/close_normal.png')"
					  click="returnView()" toolTip="Закрыть" width="22" height="22"/>
		</s:BorderContainer>
		
		<!-- subtitles -->
		<s:BorderContainer verticalCenter="80" right="0" backgroundColor="#151515" 
						   visible="{isSubSwitch}" id="player_subselect"
						   cornerRadius="4" borderColor="#494949" alpha="0.8" width="90" height="50"
						   showEffect="{showEff}" hideEffect="{hideEff}">
			<mx:LinkBar dataProvider="{subNames}" labelField="label" color="#FFFFFF" contentBackgroundColor="#1B1B1B" height="30" y="17" horizontalCenter="0"
						id="subBar" itemClick="subBar_itemClickHandler(event)">
			</mx:LinkBar>
			<s:Label text="Сабы" color="#FFFFFF" horizontalCenter="0" y="2"/>
		</s:BorderContainer>
		
		<!-- sound tracks -->
		<s:BorderContainer verticalCenter="80" left="0" backgroundColor="#151515" 
						   visible="{isSndSwitch}" id="player_sndselect"
						   cornerRadius="4" borderColor="#494949" alpha="0.8" width="90" height="50"
						   showEffect="{showEff}" hideEffect="{hideEff}">
			<mx:LinkBar dataProvider="{sndNames}" labelField="label" color="#FFFFFF" contentBackgroundColor="#1B1B1B" height="30" y="17" horizontalCenter="0"
						id="sndBar" itemClick="sndBar_itemClickHandler(event)">
			</mx:LinkBar>
			<s:Label text="Звук" color="#FFFFFF" horizontalCenter="0" y="2"/>
		</s:BorderContainer>
	</s:BorderContainer>
	
	<!-- bottom control bar -->
	<s:BorderContainer id="player_controls" height="36" backgroundColor="#151515" bottom="0"
					   left="0" right="0"
					   horizontalCenter="0" borderVisible="false"
					   showEffect="{showEff}" hideEffect="{hideEff}">
		<ui:ToggleImage onImage="{playBtn}" offImage="{pauseBtn}" 
						id="playpause" x="1" click="{togglePlayPause()}" width="32" height="32" verticalCenter="0"/>
		
		<!-- VOLUME -->
		<ui:ToggleImage onImage="{unmuteBtn}" offImage="{muteBtn}" click="{toggleMute()}" width="20" height="20" 
				  verticalCenter="0" right="140"/>
		<s:HSlider id="player_volume" minimum="0" maximum="100" value="100" change="{setVolume()}" 
				   width="90" visible="true" verticalCenter="-1" right="50"/>
		
		<!-- PROGRESS -->
		<ui:AdvancedProgressBar verticalCenter="0" left="40" right="265" id="video_progress" >
		</ui:AdvancedProgressBar>
		
		<!-- TIME -->
		<s:BorderContainer width="90" height="15" verticalCenter="0" backgroundAlpha="0.0" borderVisible="false" dropShadowVisible="false" right="170">
			<s:Label text="0:00:00" color="#FFFFFF" id="video_time" fontFamily="Gothic" left="0" verticalCenter="0"/>
			<s:Label text="0:00:00" color="#FFFFFF" id="video_time_end" fontFamily="Gothic" verticalCenter="0" left="50"/>
			<s:Label text="/" color="#FFFFFF" fontFamily="Gothic" left="42" verticalCenter="0"/>
		</s:BorderContainer>
		
		<!-- FULLSCREEN -->
		<mx:Image source="@Embed('assets/player/fullscreen.png')" id="fullscreen_btn" click="{toggleFullScreen()}" 
				  width="24" height="24" useHandCursor="true" buttonMode="true" alpha="0.5" verticalCenter="0" right="15"/>
	</s:BorderContainer>
	
	
	<!-- previous next episodes windows -->
	<s:BorderContainer height="127" verticalCenter="0" backgroundColor="#151515" cornerRadius="12" id="player_episodes_wnd" width="140" left="100" color="#FFFFFF"
					   click="{prevEpisode()}" useHandCursor="true" buttonMode="true" visible="false">
		<mx:Image y="20" width="120" height="66" id="player_prev_ep_img" x="10" source="{prev_ep_img}"/>
		<s:Label y="94" width="120" fontFamily="Verdana" textAlign="center" id="player_prev_ep_txt" x="10" color="#FFFFFF"
				 text="{prev_ep_txt}"/>
		<s:Label x="10" y="5" text="Предыдущий" width="120" fontFamily="Verdana" verticalAlign="middle" textAlign="center" color="#FFFFFF"/>
	</s:BorderContainer>
	<s:BorderContainer height="127" verticalCenter="0" backgroundColor="#151515" cornerRadius="12" id="player_episodes_wnd_1" width="140" right="100"
					   click="{nextEpisode()}" useHandCursor="true" buttonMode="true" visible="false">
		<mx:Image y="20" width="120" height="66" id="player_next_ep_img" x="10" source="{next_ep_img}"/>
		<s:Label y="94" text="{next_ep_txt}" width="120" fontFamily="Verdana" id="player_next_ep_txt" textAlign="center" x="10" color="#FFFFFF"/>
		<s:Label x="10" y="5" text="Следующий" width="120" fontFamily="Verdana" verticalAlign="middle" textAlign="center" color="#FFFFFF"/>
	</s:BorderContainer>
	
	<!-- sound loading indicator -->
	<s:BorderContainer width="100%" height="100%" backgroundColor="#000000" backgroundAlpha="0.4" id="loading_status_wnd" visible="false">
		<s:BorderContainer width="300" height="100" backgroundColor="#151515" cornerRadius="4" borderColor="#494949" verticalCenter="0" horizontalCenter="0">
			<s:RichText color="#FFFFFF" fontWeight="bold" fontFamily="Gothic" id="sound_loading_status" verticalAlign="middle" horizontalCenter="0" verticalCenter="0" />
		</s:BorderContainer>
	</s:BorderContainer>
</s:Group>